# Яндекс.Товары

Описание условий задачи в [Task.md](Task.md).

## Стек

| Компонент | Технология |
| - | - |
| БД | Postgres |
| Миграции | Alembic |
| ORM | SQLAlchemy |
| Валидация | Pydantic |
| Веб-фреймворк | FastAPI |
| Контейнеризация | Docker | 
| Развёртывание | Docker-Compose |
| Управление зависимостями | Poetry |


## Структура

- `alembic` - файлы Alembic;

- `app` - модуль с приложением;

    - `marketplace` - неподсредственно относящиеся к задаче файлы;

		- `crud` - CRUD;

		- `models` - модели для ORM;
		
		- `schemas` - модели Pydantic;

        - `routes` - эндпоинты API;

	- `db.py` - взаимойдействие с БД;

	- `main.py` - `FastAPI`-приложение;

- `common` - подгрузка конфигураций (`.env` файлов);
		
- `tests` - тесты;

- `.env` - файл конфигурации сервиса;

- `alembic.ini` - файл конфигурации Alembic;

- `Dockerfile` - Dockerfile приложения;

- `docker-compose.yml` - Compose-файл для запуска сервиса;

- `pyproject.toml`, `setup.cfg` - управление зависимостями;

- `Task.md` - файл с условиями задания

## Установка

Для установки всех необходимых пакетов и создания venv необходими иметь установленный Poetry. После этого необходимо ввести следующую команду для установки зависимостей и создания окружения:

```
poetry install
```

## Запуск

Для запуска всех компонентов достаточно ввести:

```
[sudo] docker[-]compose up
```

Команда создаст БД, произведёт миграции с помощью Alembic и запустит сервис.

Сервис будет доступен на `localhost:80`. 

## Тесты

Для запуска следует ввести:

```
python tests/unit_test.py
```
